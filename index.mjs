// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as t}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import{assign as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-flatten2d-by@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-vind2bind@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ind2sub@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dsumpw@v0.0.11-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-base-dscal@v0.0.10-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dapx@v0.0.10-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dmin@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import{isPrimitive as v}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import P from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-array@esm/index.mjs";function F(t,e){if(!y(e))return new TypeError(u("0dP2h",e));if(x(e,"alpha")){if(t.alpha=e.alpha,!v(t.alpha)||w(t.alpha))return new TypeError(u("0dP8h","alpha",t.alpha));if(t.alpha<0||t.alpha>1)return new RangeError(u("invalid option. `%s` option must be a number on the interval: [0, 1]. Value: `%s`.","alpha",t.alpha))}return x(e,"correct")&&(t.correct=e.correct,!b(t.correct))?new TypeError(u("0dP30","correct",t.simulate)):null}function k(t,e,s,r,i){return this instanceof k?(this._pValue=t,this._alpha=e,this._statistic=s,this._df=r,this._expected=i,this):new k(t,e,s,r,i)}V(k.prototype,"alpha",(function(){return this._alpha})),V(k.prototype,"df",(function(){return this._df})),V(k.prototype,"expected",(function(){return this._expected})),T(k.prototype,"method","Chi-square independence test"),V(k.prototype,"pValue",(function(){return this._pValue})),V(k.prototype,"rejected",(function(){return this._pValue<=this._alpha})),V(k.prototype,"statistic",(function(){return this._statistic})),T(k.prototype,"toString",(function(t){var e,s,r;if(s=4,e=!0,arguments.length>0){if(!y(t))throw new TypeError(u("0dP4K",t));if(x(t,"digits")){if(!_(t.digits))throw new TypeError(u("0dP3b","digits",t.digits));s=t.digits}if(x(t,"decision")){if(!b(t.decision))throw new TypeError(u("0dP30","decision",t.decision));e=t.decision}}return r=[this.method,"","","Null hypothesis: the two variables are independent","","","    pValue: "+E(this._pValue,-s),"    statistic: "+E(this._statistic,-s),"    degrees of freedom: "+this._df,""],e&&(r.push("Test Decision: "+(this.rejected?"Reject":"Fail to reject")+" null in favor of alternative at "+100*this._alpha+"% significance level"),r.push("")),r.join("\n")})),T(k.prototype,"toJSON",(function(){var t=this._expected;return{rejected:this.rejected,alpha:this._alpha,pValue:this._pValue,df:this._df,statistic:this._statistic,expected:P(t.data,t.shape,t.strides,t.offset,t.order),method:this.method}}));function N(e,s){if(!t(e))throw new TypeError(u("invalid argument. First argument must contain nonnegative integers. Indices: (%s). Value: `%s`.",s.join(", "),String(e)));return e}function S(e,s){var r,n,a,l,h,p,c,f;for(n=e.data,a=e.order,l=e.strides,h=e.offset,p=o(s),r=new i(p),f=0;f<p;f++){if(c=n[d(s,l,h,a,f,"throw")],!t(c))throw new TypeError(u("invalid argument. First argument must contain nonnegative integers. Indices: (%s). Value: `%s`.",m(s,l,h,a,f,"throw"),String(c)));r[f]=c}return r}function q(t,e,s,r){var n,a,o,d,m,h,p;for(0===r?(m=s,h=e,o=1,d=s):(m=e,h=s,o=s,d=1),a=new i(h),n=0,p=0;p<h;p++)a[p]=l.ndarray(m,t,o,n),n+=d;return a}function I(t,e){var s,r,n,a,o,d,m;for(n=t.length,a=e.length,s=new i(n*a),r=0,d=0;d<n;d++)for(o=t[d],m=0;m<a;m++)s[r]=o*e[m],r+=1;return s}function R(t,e){var s,r;for(s=new i(t.length),r=0;r<t.length;r++)s[r]=f(t[r]-e[r]);return s}function C(t,e){var s;for(s=0;s<t.length;s++)t[s]=t[s]*t[s]/e[s];return l(t.length,t,1)}function D(t,d){var m,f,b,v,y,w,x,_,E,T,V,P,D;if(e(t)){if(2!==(V=t.shape).length)throw new TypeError(u("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Number of input array dimensions: %u.",V.length));E=S(t,V)}else{if(!s(t))throw new TypeError(u("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Value: `%s`.",t));if(2!==(V=n(t)).length)throw new TypeError(u("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Number of input array dimensions: %u.",V.length));E=new i(o(V)),r(t,V,!1,E,1,0,N)}if(v={alpha:.05,correct:!0},arguments.length>1&&(x=F(v,d)))throw x;return P=V[0],D=V[1],_=l(P*D,E,1),b=I(q(E,P,D,0),q(E,P,D,1)),f=R(E,b=h(b.length,1/_,b,1)),2===P&&2===D&&v.correct&&(m=j(.5,c(f.length,f,1)),p(f.length,-m,f,1)),w=C(f,b),y=1-g(w,T=(P-1)*(D-1)),b=new a("float64",b,[P,D],[D,1],0,"row-major",{readonly:!0}),new k(y,v.alpha,w,T,b)}export{D as default};
//# sourceMappingURL=index.mjs.map
