// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as t}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.0-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.2.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.0-esm/index.mjs";import{assign as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-flatten2d-by@v0.2.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.2.0-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@v0.2.0-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.2.0-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-vind2bind@v0.2.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ind2sub@v0.2.0-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dsumpw@v0.2.0-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-base-dscal@v0.2.0-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dapx@v0.2.0-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dmin@v0.2.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@v0.2.0-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@v0.2.0-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@v0.2.0-esm/index.mjs";import{isPrimitive as g}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.2.0-esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@v0.2.0-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.0-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@v0.2.0-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.2.0-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.2.0-esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@v0.2.0-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.1.0-esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.1.0-esm/index.mjs";import F from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-array@v0.1.0-esm/index.mjs";function O(t,e){if(!y(e))return new TypeError(f("invalid argument. Options argument must be an object. Value: `%s`.",e));if(x(e,"alpha")){if(t.alpha=e.alpha,!b(t.alpha)||w(t.alpha))return new TypeError(f("invalid option. `%s` option must be a number. Option: `%s`.","alpha",t.alpha));if(t.alpha<0||t.alpha>1)return new RangeError(f("invalid option. `%s` option must be a number on the interval: [0, 1]. Value: `%s`.","alpha",t.alpha))}return x(e,"correct")&&(t.correct=e.correct,!g(t.correct))?new TypeError(f("invalid option. `%s` option must be a boolean. Option: `%s`.","correct",t.simulate)):null}function k(t,e,s,i,r){return this instanceof k?(this._pValue=t,this._alpha=e,this._statistic=s,this._df=i,this._expected=r,this):new k(t,e,s,i,r)}T(k.prototype,"alpha",(function(){return this._alpha})),T(k.prototype,"df",(function(){return this._df})),T(k.prototype,"expected",(function(){return this._expected})),E(k.prototype,"method","Chi-square independence test"),T(k.prototype,"pValue",(function(){return this._pValue})),T(k.prototype,"rejected",(function(){return this._pValue<=this._alpha})),T(k.prototype,"statistic",(function(){return this._statistic})),E(k.prototype,"toString",(function(t){var e,s,i;if(s=4,e=!0,arguments.length>0){if(!y(t))throw new TypeError(f("invalid argument. Must provide an object. Value: `%s`.",t));if(x(t,"digits")){if(!_(t.digits))throw new TypeError(f("invalid option. `%s` option must be a positive integer. Option: `%s`.","digits",t.digits));s=t.digits}if(x(t,"decision")){if(!g(t.decision))throw new TypeError(f("invalid option. `%s` option must be a boolean. Option: `%s`.","decision",t.decision));e=t.decision}}return i=[this.method,"","","Null hypothesis: the two variables are independent","","","    pValue: "+V(this._pValue,-s),"    statistic: "+V(this._statistic,-s),"    degrees of freedom: "+this._df,""],e&&(i.push("Test Decision: "+(this.rejected?"Reject":"Fail to reject")+" null in favor of alternative at "+100*this._alpha+"% significance level"),i.push("")),i.join("\n")})),E(k.prototype,"toJSON",(function(){var t=this._expected;return{rejected:this.rejected,alpha:this._alpha,pValue:this._pValue,df:this._df,statistic:this._statistic,expected:F(t.data,t.shape,t.strides,t.offset,t.order),method:this.method}}));function N(e,s){if(!t(e))throw new TypeError(f("invalid argument. First argument must contain nonnegative integers. Indices: (%s). Value: `%s`.",s.join(", "),String(e)));return e}function S(e,s){var i,n,a,l,p,h,c,u;for(n=e.data,a=e.order,l=e.strides,p=e.offset,h=o(s),i=new r(h),u=0;u<h;u++){if(c=n[d(s,l,p,a,u,"throw")],!t(c))throw new TypeError(f("invalid argument. First argument must contain nonnegative integers. Indices: (%s). Value: `%s`.",m(s,l,p,a,u,"throw"),String(c)));i[u]=c}return i}function q(t,e,s,i){var n,a,o,d,m,p,h;for(0===i?(m=s,p=e,o=1,d=s):(m=e,p=s,o=s,d=1),a=new r(p),n=0,h=0;h<p;h++)a[h]=l.ndarray(m,t,o,n),n+=d;return a}function I(t,e){var s,i,n,a,o,d,m;for(n=t.length,a=e.length,s=new r(n*a),i=0,d=0;d<n;d++)for(o=t[d],m=0;m<a;m++)s[i]=o*e[m],i+=1;return s}function P(t,e){var s,i;for(s=new r(t.length),i=0;i<t.length;i++)s[i]=u(t[i]-e[i]);return s}function R(t,e){var s;for(s=0;s<t.length;s++)t[s]=t[s]*t[s]/e[s];return l(t.length,t,1)}function C(t,d){var m,u,g,b,y,w,x,_,V,E,T,F,C;if(e(t)){if(2!==(T=t.shape).length)throw new TypeError(f("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Number of input array dimensions: %u.",T.length));V=S(t,T)}else{if(!s(t))throw new TypeError(f("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Value: `%s`.",t));if(2!==(T=n(t)).length)throw new TypeError(f("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Number of input array dimensions: %u.",T.length));V=new r(o(T)),i(t,T,!1,V,1,0,N)}if(b={alpha:.05,correct:!0},arguments.length>1&&(x=O(b,d)))throw x;return F=T[0],C=T[1],_=l(F*C,V,1),g=I(q(V,F,C,0),q(V,F,C,1)),u=P(V,g=p(g.length,1/_,g,1)),2===F&&2===C&&b.correct&&(m=j(.5,c(u.length,u,1)),h(u.length,-m,u,1)),w=R(u,g),y=1-v(w,E=(F-1)*(C-1)),g=new a("float64",g,[F,C],[C,1],0,"row-major",{readonly:!0}),new k(y,b.alpha,w,E,g)}export{C as default};
//# sourceMappingURL=index.mjs.map
