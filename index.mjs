// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import{isPrimitive as t}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.1.0-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@v0.1.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import{assign as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-flatten2d-by@v0.1.0-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@v0.1.0-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/array-shape@v0.1.0-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@v0.1.0-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-vind2bind@v0.1.0-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-ind2sub@v0.1.0-esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dsumpw@v0.1.0-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-base-dscal@v0.1.0-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-dapx@v0.1.0-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dmin@v0.1.0-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@v0.1.0-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@v0.1.0-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.1.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@v0.1.0-esm/index.mjs";import{isPrimitive as g}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@v0.1.0-esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@v0.1.0-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.1.0-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@v0.1.0-esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@v0.1.0-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.1.0-esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@v0.1.0-esm/index.mjs";import H from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import G from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-to-array@v0.1.0-esm/index.mjs";function V(t,e){if(!y(e))return new TypeError(v("1H12V,FD",e));if(w(e,"alpha")){if(t.alpha=e.alpha,!b(t.alpha)||x(t.alpha))return new TypeError(v("1H18P,GU","alpha",t.alpha));if(t.alpha<0||t.alpha>1)return new RangeError(v("1H19Q,Gy","alpha",t.alpha))}return w(e,"correct")&&(t.correct=e.correct,!g(t.correct))?new TypeError(v("1H12o,GE","correct",t.simulate)):null}function P(t,e,s,r,i){return this instanceof P?(this._pValue=t,this._alpha=e,this._statistic=s,this._df=r,this._expected=i,this):new P(t,e,s,r,i)}T(P.prototype,"alpha",(function(){return this._alpha})),T(P.prototype,"df",(function(){return this._df})),T(P.prototype,"expected",(function(){return this._expected})),H(P.prototype,"method","Chi-square independence test"),T(P.prototype,"pValue",(function(){return this._pValue})),T(P.prototype,"rejected",(function(){return this._pValue<=this._alpha})),T(P.prototype,"statistic",(function(){return this._statistic})),H(P.prototype,"toString",(function(t){var e,s,r;if(s=4,e=!0,arguments.length>0){if(!y(t))throw new TypeError(v("1H147,Gz",t));if(w(t,"digits")){if(!_(t.digits))throw new TypeError(v("1H13P,Fv","digits",t.digits));s=t.digits}if(w(t,"decision")){if(!g(t.decision))throw new TypeError(v("1H12o,GE","decision",t.decision));e=t.decision}}return r=[this.method,"","","Null hypothesis: the two variables are independent","","","    pValue: "+E(this._pValue,-s),"    statistic: "+E(this._statistic,-s),"    degrees of freedom: "+this._df,""],e&&(r.push("Test Decision: "+(this.rejected?"Reject":"Fail to reject")+" null in favor of alternative at "+100*this._alpha+"% significance level"),r.push("")),r.join("\n")})),H(P.prototype,"toJSON",(function(){var t=this._expected;return{rejected:this.rejected,alpha:this._alpha,pValue:this._pValue,df:this._df,statistic:this._statistic,expected:G(t.data,t.shape,t.strides,t.offset,t.order),method:this.method}}));function S(e,s){if(!t(e))throw new TypeError(v("1H1Gv",s.join(", "),String(e)));return e}function F(e,s){var r,n,o,p,l,m,c,j;for(n=e.data,o=e.order,p=e.strides,l=e.offset,m=d(s),r=new i(m),j=0;j<m;j++){if(c=n[a(s,p,l,o,j,"throw")],!t(c))throw new TypeError(v("1H1Gv",h(s,p,l,o,j,"throw"),String(c)));r[j]=c}return r}function q(t,e,s,r){var n,o,d,a,h,l,m;for(0===r?(h=s,l=e,d=1,a=s):(h=e,l=s,d=s,a=1),o=new i(l),n=0,m=0;m<l;m++)o[m]=p.ndarray(h,t,d,n),n+=a;return o}function D(t,e){var s,r,n,o,d,a,h;for(n=t.length,o=e.length,s=new i(n*o),r=0,a=0;a<n;a++)for(d=t[a],h=0;h<o;h++)s[r]=d*e[h],r+=1;return s}function N(t,e){var s,r;for(s=new i(t.length),r=0;r<t.length;r++)s[r]=j(t[r]-e[r]);return s}function R(t,e){var s;for(s=0;s<t.length;s++)t[s]=t[s]*t[s]/e[s];return p(t.length,t,1)}function k(t,a){var h,j,g,b,y,x,w,_,E,H,T,G,k;if(e(t)){if(2!==(T=t.shape).length)throw new TypeError(v("1H1Gw",T.length));E=F(t,T)}else{if(!s(t))throw new TypeError(v("1H1Gx",t));if(2!==(T=n(t)).length)throw new TypeError(v("1H1Gw",T.length));E=new i(d(T)),r(t,T,!1,E,1,0,S)}if(b={alpha:.05,correct:!0},arguments.length>1&&(w=V(b,a)))throw w;return G=T[0],k=T[1],_=p(G*k,E,1),g=D(q(E,G,k,0),q(E,G,k,1)),j=N(E,g=l(g.length,1/_,g,1)),2===G&&2===k&&b.correct&&(h=f(.5,c(j.length,j,1)),m(j.length,-h,j,1)),x=R(j,g),y=1-u(x,H=(G-1)*(k-1)),g=new o("float64",g,[G,k],[k,1],0,"row-major",{readonly:!0}),new P(y,b.alpha,x,H,g)}export{k as default};
//# sourceMappingURL=index.mjs.map
