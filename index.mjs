// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-matrix-like@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-array@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-incr-min@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gsum@v0.0.9-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import{isPrimitive as f}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import{isPrimitive as v}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";function x(e){return function(t){var s,r,i;if(r=4,s=!0,arguments.length>0){if(!h(t))throw new TypeError(o("0dP4K",t));if(c(t,"digits")){if(!p(t.digits))throw new TypeError(o("0dP3b","digits",t.digits));r=t.digits}if(c(t,"decision")){if(!f(t.decision))throw new TypeError(o("0dP30","decision",t.decision));s=t.decision}}i="",i+=e.method,i+="\n\n",i+="Null hypothesis: the two variables are independent",i+="\n\n",i+="    pValue: "+j(e.pValue,-r)+"\n",i+="    statistic: "+j(e.statistic,-r)+"\n",i+="    degrees of freedom: "+e.df+"\n",i+="\n",s&&(i+="Test Decision: ",e.rejected?i+="Reject null in favor of alternative at "+100*e.alpha+"% significance level":i+="Fail to reject null in favor of alternative at "+100*e.alpha+"% significance level",i+="\n");return i}}var y={alpha:.05,correct:!0};function w(e,t){var s,r,i,n,a,d,o,l,m,p;if(1===t?(a=e.shape[1],d=e.shape[0],r=e.strides[1],i=e.strides[0]):(a=e.shape[0],d=e.shape[1],r=e.strides[0],i=e.strides[1]),0===a||0===d)return 0;for(s=new g(a),o=e.offset,l=0;l<a;l++){for(p=o+l*r,n=0,m=0;m<d;m++)n+=e.data[p+m*i];s[l]=n}return s}function E(e,t){var s,r,n=e.length,a=t.length,d=i(new g(n*a),{shape:[n,a]});for(s=0;s<n;s++)for(r=0;r<a;r++)d.set(s,r,e[s]*t[r]);return d}function T(e,t){var s,r,n,a,d,o;for(a=e.shape[0],d=e.shape[1],s=i(new g(a*d),{shape:[a,d]}),r=0;r<a;r++)for(n=0;n<d;n++)o=u(e.get(r,n)-t.get(r,n)),s.set(r,n,o);return s}function P(e,t){if(!h(t))return new TypeError(o("0dP2h",t));if(c(t,"alpha")){if(e.alpha=t.alpha,!v(e.alpha)||b(e.alpha))return new TypeError(o("0dP8h","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(o("invalid option. `%s` option must be a number on the interval: [0, 1]. Value: `%s`.","alpha",e.alpha))}return c(t,"correct")&&(e.correct=t.correct,!f(e.correct))?new TypeError(o("0dP30","correct",e.simulate)):null}function V(p,h){var f,c,j,g,u,v,b,V,_,F,k,q,R,C,D,K,N;if(r(p)&&(p=i(p)),!s(p))throw new TypeError(o("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Value: `%s`.",p));if(!t(p.data))throw new TypeError(o("invalid argument. First argument must contain nonnegative integers. Value: `%s`.",p));if(_=l(y),arguments.length>1&&(q=P(_,h)))throw q;for(C=a(p.length,p.data,1),b=p.shape[0],V=p.shape[1],c=w(p,1),u=E(w(p,2),c),K=0;K<u.length;K++)u.data[K]/=C;if(f=T(p,u),_.correct&&2===b&&2===V){for(j=n(),K=0;K<f._buffer.length;K++)j(f._buffer[K]);for(g=d(.5,j()),K=0;K<f._buffer.length;K++)f._buffer[K]-=g}for(K=0;K<b;K++)for(N=0;N<V;N++)D=f.get(K,N)*f.get(K,N)/u.get(K,N),f.set(K,N,D);return k=a(f.length,f._buffer,1),F=1-m(k,v=(b-1)*(V-1)),e(R={},"rejected",F<=_.alpha),e(R,"alpha",_.alpha),e(R,"pValue",F),e(R,"df",v),e(R,"expected",u),e(R,"statistic",k),e(R,"method","Chi-square independence test"),e(R,"print",x(R)),R}export{V as default};
//# sourceMappingURL=index.mjs.map
