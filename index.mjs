// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-matrix-like@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-array@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-incr-min@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gsum@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";var x=p,w=h,y=f.isPrimitive,E=c,T=j,V=d;var O=function(e){return function(t){var s,i,r;if(i=4,s=!0,arguments.length>0){if(!w(t))throw new TypeError(V("invalid argument. Must provide an object. Value: `%s`.",t));if(E(t,"digits")){if(!x(t.digits))throw new TypeError(V("invalid option. `%s` option must be a positive integer. Option: `%s`.","digits",t.digits));i=t.digits}if(E(t,"decision")){if(!y(t.decision))throw new TypeError(V("invalid option. `%s` option must be a boolean. Option: `%s`.","decision",t.decision));s=t.decision}}r="",r+=e.method,r+="\n\n",r+="Null hypothesis: the two variables are independent",r+="\n\n",r+="    pValue: "+T(e.pValue,-i)+"\n",r+="    statistic: "+T(e.statistic,-i)+"\n",r+="    degrees of freedom: "+e.df+"\n",r+="\n",s&&(r+="Test Decision: ",e.rejected?r+="Reject null in favor of alternative at "+100*e.alpha+"% significance level":r+="Fail to reject null in favor of alternative at "+100*e.alpha+"% significance level",r+="\n");return r}},_={alpha:.05,correct:!0},F=u;var P=function(e,t){var s,i,r,n,a,o,d,l,m,p;if(1===t?(a=e.shape[1],o=e.shape[0],i=e.strides[1],r=e.strides[0]):(a=e.shape[0],o=e.shape[1],i=e.strides[0],r=e.strides[1]),0===a||0===o)return 0;for(s=new F(a),d=e.offset,l=0;l<a;l++){for(p=d+l*i,n=0,m=0;m<o;m++)n+=e.data[p+m*r];s[l]=n}return s},k=r,q=u;var R=function(e,t){var s,i,r=e.length,n=t.length,a=k(new q(r*n),{shape:[r,n]});for(s=0;s<r;s++)for(i=0;i<n;i++)a.set(s,i,e[s]*t[i]);return a},C=u,D=r,M=g;var N=function(e,t){var s,i,r,n,a,o;for(n=e.shape[0],a=e.shape[1],s=D(new C(n*a),{shape:[n,a]}),i=0;i<n;i++)for(r=0;r<a;r++)o=M(e.get(i,r)-t.get(i,r)),s.set(i,r,o);return s},z=f.isPrimitive,A=v.isPrimitive,B=h,G=b,H=c,I=d;var J=e,K=t,L=s,Q=i,S=r,U=n,W=a,X=o,Y=d,Z=l,$=m,ee=O,te=_,se=P,ie=R,re=N,ne=function(e,t){if(!B(t))return new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t));if(H(t,"alpha")){if(e.alpha=t.alpha,!A(e.alpha)||G(e.alpha))return new TypeError(I("invalid option. `%s` option must be a number. Option: `%s`.","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(I("invalid option. `%s` option must be a number on the interval `[0,1]`. Value: `%s`.","alpha",e.alpha))}return H(t,"correct")&&(e.correct=t.correct,!z(e.correct))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","correct",e.simulate)):null};var ae=function(e,t){var s,i,r,n,a,o,d,l,m,p,h,f,c,j,u,g,v,b;if(Q(e)&&(e=S(e)),!L(e))throw new TypeError(Y("invalid argument. First argument `x` must be an array of arrays or ndarray-like object with dimension two. Value: `%s`.",e));if(!K(e.data))throw new TypeError(Y("invalid argument. First argument `x` must contain nonnegative integers. Value: `%s`.",e));if(p=Z(te),arguments.length>1&&(c=ne(p,t)))throw c;for(u=W(e.length,e.data,1),l=e.shape[0],m=e.shape[1],i=se(e,1),r=se(e,2),o=ie(r,i),v=0;v<o.length;v++)o.data[v]/=u;if(s=re(e,o),p.correct&&2===l&&2===m){for(n=U(),v=0;v<s._buffer.length;v++)n(s._buffer[v]);for(a=X(.5,n()),v=0;v<s._buffer.length;v++)s._buffer[v]-=a}for(v=0;v<l;v++)for(b=0;b<m;b++)g=s.get(v,b)*s.get(v,b)/o.get(v,b),s.set(v,b,g);return f=W(s.length,s._buffer,1),h=1-$(f,d=(l-1)*(m-1)),J(j={},"rejected",h<=p.alpha),J(j,"alpha",p.alpha),J(j,"pValue",h),J(j,"df",d),J(j,"expected",o),J(j,"statistic",f),J(j,"method","Chi-square independence test"),J(j,"print",ee(j)),j};export{ae as default};
//# sourceMappingURL=index.mjs.map
