// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer-array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-matrix-like@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-array-array@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-array@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-incr-min@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/blas-ext-base-gsum@v0.0.9-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-min@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-chisquare-cdf@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import{isPrimitive as p}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import{isPrimitive as u}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";function b(e){return function(t){var s,r,i;if(r=4,s=!0,arguments.length>0){if(!h(t))throw new TypeError(o("0dP4K",t));if(f(t,"digits")){if(!m(t.digits))throw new TypeError(o("0dP3b","digits",t.digits));r=t.digits}if(f(t,"decision")){if(!p(t.decision))throw new TypeError(o("0dP30","decision",t.decision));s=t.decision}}i="",i+=e.method,i+="\n\n",i+="Null hypothesis: the two variables are independent",i+="\n\n",i+="    pValue: "+c(e.pValue,-r)+"\n",i+="    statistic: "+c(e.statistic,-r)+"\n",i+="    degrees of freedom: "+e.df+"\n",i+="\n",s&&(i+="Test Decision: ",e.rejected?i+="Reject null in favor of alternative at "+100*e.alpha+"% significance level":i+="Fail to reject null in favor of alternative at "+100*e.alpha+"% significance level",i+="\n");return i}}function x(e,t){var s,r,i,n,a,d,o,l,m,h;if(1===t?(a=e.shape[1],d=e.shape[0],r=e.strides[1],i=e.strides[0]):(a=e.shape[0],d=e.shape[1],r=e.strides[0],i=e.strides[1]),0===a||0===d)return 0;for(s=new j(a),o=e.offset,l=0;l<a;l++){for(h=o+l*r,n=0,m=0;m<d;m++)n+=e.data[h+m*i];s[l]=n}return s}function w(e,t){var s,r,n=e.length,a=t.length,d=i(new j(n*a),{shape:[n,a]});for(s=0;s<n;s++)for(r=0;r<a;r++)d.set(s,r,e[s]*t[r]);return d}function y(e,t){var s,r,n,a,d,o;for(a=e.shape[0],d=e.shape[1],s=i(new j(a*d),{shape:[a,d]}),r=0;r<a;r++)for(n=0;n<d;n++)o=g(e.get(r,n)-t.get(r,n)),s.set(r,n,o);return s}function E(e,t){if(!h(t))return new TypeError(o("0dP2h",t));if(f(t,"alpha")){if(e.alpha=t.alpha,!u(e.alpha)||v(e.alpha))return new TypeError(o("0dP8h","alpha",e.alpha));if(e.alpha<0||e.alpha>1)return new RangeError(o("invalid option. `%s` option must be a number on the interval: [0, 1]. Value: `%s`.","alpha",e.alpha))}return f(t,"correct")&&(e.correct=t.correct,!p(e.correct))?new TypeError(o("0dP30","correct",e.simulate)):null}function T(m,h){var p,f,c,j,g,u,v,T,P,V,_,F,k,q,R,C,D;if(r(m)&&(m=i(m)),!s(m))throw new TypeError(o("invalid argument. First argument must be an array of arrays or a two-dimensional ndarray-like object. Value: `%s`.",m));if(!t(m.data))throw new TypeError(o("invalid argument. First argument must contain nonnegative integers. Value: `%s`.",m));if(P={alpha:.05,correct:!0},arguments.length>1&&(F=E(P,h)))throw F;for(q=a(m.length,m.data,1),v=m.shape[0],T=m.shape[1],f=x(m,1),g=w(x(m,2),f),C=0;C<g.length;C++)g.data[C]/=q;if(p=y(m,g),P.correct&&2===v&&2===T){for(c=n(),C=0;C<p._buffer.length;C++)c(p._buffer[C]);for(j=d(.5,c()),C=0;C<p._buffer.length;C++)p._buffer[C]-=j}for(C=0;C<v;C++)for(D=0;D<T;D++)R=p.get(C,D)*p.get(C,D)/g.get(C,D),p.set(C,D,R);return _=a(p.length,p._buffer,1),V=1-l(_,u=(v-1)*(T-1)),e(k={},"rejected",V<=P.alpha),e(k,"alpha",P.alpha),e(k,"pValue",V),e(k,"df",u),e(k,"expected",g),e(k,"statistic",_),e(k,"method","Chi-square independence test"),e(k,"print",b(k)),k}export{T as default};
//# sourceMappingURL=index.mjs.map
